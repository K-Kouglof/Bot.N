# fly.toml app configuration file generated for bot-n on 2025-05-18T12:36:46Z
#
# See https://fly.io/docs/reference/configuration/ for information about how to use this file.
#

app = "bot-n"
primary_region = "hkg"

[build]

[http_service]
  internal_port    = 3000
  force_https      = true
  auto_stop_machines  = "never"    # 自動停止させない
  auto_start_machines = true
  # min_machines_running を外して、代わりに [scale] で管理します
  processes = ["app"]

# ── ＜ここを削除 or コメントアウト＞ ──
# [[vm]]
#   memory = "1gb"
#   cpu_kind = "shared"
#   cpus = 1
#   memory_mb = 1024
# ────────────────────────────────────

# マウントは１つだけ
[[mounts]]
source      = "data1"
destination = "/data"

# ── これも不要なので消す ──
# [[mounts]]
# source      = "data2"
# destination = "/data2"

# ── これを追加 ──
# マシンは常に１台だけ
[scale]
min = 1
max = 1
desired = 1
